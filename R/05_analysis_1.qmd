---
title: "05_analysis_1"
format: html
---

Load libraries

```{r}
#| message: false

library(tidyverse)
```

load the augmented data from file:

```{r}
aug_data <- read_tsv("../data/03_aug_data.tsv")

```

To estimate

```{r}
aug_data |>
  filter(saa_result != saa_custom) |>
  select(project,
         patient_number,
         saa_result,
         saa_custom,
         rep,
         fmax
         ) |>
  pivot_wider(
    names_from = rep,
    values_from = fmax,
    names_prefix = "rep_"
    )

```

```{r}
# Simple bar plot of agreement

status_comparison %>%
  mutate(match = ifelse(match, "Match", "Mismatch")) %>%
    ggplot(aes(x = match, fill = match)) +
    geom_bar() +
    facet_wrap(~ project) +
    theme_minimal() +
    labs(title = "Agreement between Given and Calculated SAA Status",
    x = "Status Agreement",
    y = "Number of Patients")

```
